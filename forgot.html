<!DOCTYPE html>
<html>
<head>
	<title>Forgot</title>
	<style type="text/css">
		.logo{
			float: left;
			clear: both;
		}
		h1{
			font-size: 25px;
			text-align: left;
			margin: 20px;
		}
		.lb{
			/*cursor: pointer;*/
            display: inline-block;
            padding: 3px 6px;
            text-align: right;
            width: 100px;
            vertical-align: top;
		}
		.console{
			margin-left: 10px;
		}
		.description{
			text-align: center;
			font-size: 14px;
			position: center;
			padding-left: 150px;
			padding-right: 150px;
		}
		table{
			margin: auto;
		}
		th, td {
			padding: 8px;
			text-align: center;
		}
	</style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
<img class="logo" src="./img/logo.jpg" style="width: 150px; height: 200px">
	<h1>Forgot UserName/Password</h1>
	<label class="lb">Email:</label>
	<input class="in" type="text" placeholder="Email Address" name="email">
	<br>
<!-- 	<label class="lb">Password:</label>
	<input class="in" type="text" placeholder="Password" name="password"> -->
	<br>
	<button style="margin: 10px; width: 100px" onclick="getInfo()">Retrieve</button>
	<button style="margin: 10px; width: 100px" onclick="location.href='./login.html'">Cancel</button>
	<br>
	<br>
	<br>
	<label class="console"></label>
	<table id="resultTable" hidden="true">
		<tr>
			<th>Username</th>
			<th>Password</th>
		</tr>
	</table>
	<br><br><br><br>
	<div class="description">
		It’s your turn to move. You considering several candidate moves. You aren’t sure which one is better. They may even all seem great. Why don’t you play all of them?
		<br><br>
		Welcome to Chess-fork! This variant of chess allows the player with the move to start a new game from the current position (with the current clocks) and then games run in parallel.
		<br><br>
		Chess-fork games are defined using x+y*z, where x is the time on the clock when the game starts (in minutes), y is the increment per move from move 1 (in seconds), and z is the number of forks available to each player.
		<br><br>
		So, who wins the game in Chess-fork? It depends! If you play an “aggregate rating” game, then you score 1 point in each board you win, 0.5 points in each board you draw and 0 points in each board you lose. You win the game if you score more points than your opponent when adding up across boards. ELO ratings are then adjusted once according to this game outcome.
		<br><br>
		If you play an “independent rating” game, then each board is an independent game. You win, draw or lose in each board and your ELO rating is adjusted several times according to the outcome of the game in each board (as games finish).
		<br><br>
		What if you don’t care with your ELO rating? Just have fun and play unrated games! Come join us and play Chess-fork! This is a beta version of this website (for example, the Chess960-fork is not yet available). Bear with us and send us comments and suggestions for improvement at fork.chess@gmail.com.
		<br><br>
	</div>
<script>
	function getInfo(){
		let email = document.querySelector('.in').value;
		location.href = `/forget?email=${email}`;
	}
	const urlParam = new URLSearchParams(window.location.search);
	var error = urlParam.get('error');
	var found = urlParam.get('found');
	var num = urlParam.get('num');
	if(error){
		$('.console').text('Something went wrong, please try again!');
		$('.console').css('color','red');
	} else if (found){
		$('.console').text('No email address found!');
		$('.console').css('color','red');
	}
	if(num){
		let str = `The email address matches the following account:`;
		$('.console').text(`${str}`);
		document.querySelector('#resultTable').hidden = false;
		let table = document.querySelector('#resultTable').getElementsByTagName('tbody')[0];
		for (let i = 0; i < parseInt(num) ; i++) {
			let username = urlParam.get(`username_${i}`);
			let password = urlParam.get(`password_${i}`);
			let row = document.createElement('tr');
			row.innerHTML += `<td>${username}</td>`;
			row.innerHTML += `<td>${password}</td>`
			table.appendChild(row);
		}
	}

</script>
</body>
</html>